<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ¥‘ MenÃº Semanal Keto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-br from-green-50 to-emerald-100 min-h-screen p-4">

  <div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold text-center mb-2">ğŸ¥‘ MenÃº Semanal Keto</h1>
    <p class="text-center text-gray-600 mb-6">Planea tu semana de forma simple y deliciosa</p>

    <!-- BOTONES -->
    <div class="flex flex-wrap gap-3 justify-center mb-6">
      <button onclick="generateKetoMenu()" class="bg-emerald-600 text-white px-4 py-2 rounded-xl shadow hover:bg-emerald-700 transition">
        ğŸ² Sugerencias Keto
      </button>

      <button onclick="clearTable()" class="bg-red-500 text-white px-4 py-2 rounded-xl shadow hover:bg-red-600 transition">
        ğŸ§¹ Limpiar todo
      </button>
    </div>

    <!-- TABLA -->
    <div class="overflow-x-auto mb-8">
      <table class="min-w-full border-collapse bg-white rounded-xl shadow">
        <thead>
          <tr class="bg-emerald-600 text-white">
            <th class="p-2">ğŸ½ï¸</th>
            <th class="p-2">Lunes</th>
            <th class="p-2">Martes</th>
            <th class="p-2">MiÃ©rcoles</th>
            <th class="p-2">Jueves</th>
            <th class="p-2">Viernes</th>
            <th class="p-2">SÃ¡bado</th>
            <th class="p-2">Domingo</th>
          </tr>
        </thead>
        <tbody id="menuTable">
          <!-- Filas generadas por JS -->
        </tbody>
      </table>
    </div>

    <!-- LISTA DE COMPRAS -->
    <div class="bg-white rounded-xl shadow p-4">
      <h2 class="text-xl font-semibold mb-2">ğŸ›’ Lista de la compra</h2>
      <textarea id="shoppingList" class="w-full h-40 p-3 border rounded-lg focus:outline-none focus:ring focus:ring-emerald-300"
        placeholder="AquÃ­ aparecerÃ¡n los ingredientes segÃºn los platos..."></textarea>
    </div>
  </div>

  <script>
    const days = ["Lunes", "Martes", "MiÃ©rcoles", "Jueves", "Viernes", "SÃ¡bado", "Domingo"];
    const meals = ["Desayuno", "Almuerzo", "Cena"];

    const ketoDishes = {
      Desayuno: [
        "ğŸ¥š Huevos con aguacate",
        "ğŸ§€ Omelette de queso y espinaca",
        "ğŸ¥“ Tocino con huevos",
        "ğŸ¥¥ Yogur griego con nueces",
        "ğŸ³ Huevos revueltos con mantequilla"
      ],
      Almuerzo: [
        "ğŸ¥— Ensalada CÃ©sar keto",
        "ğŸ— Pollo a la plancha con brÃ³coli",
        "ğŸ¥© Carne salteada con vegetales",
        "ğŸŸ SalmÃ³n con mantequilla",
        "ğŸ¥‘ Ensalada de atÃºn y aguacate"
      ],
      Cena: [
        "ğŸ– Costillas al horno",
        "ğŸ„ ChampiÃ±ones rellenos",
        "ğŸ¥© Bistec con espÃ¡rragos",
        "ğŸ— Pollo al curry keto",
        "ğŸŸ Pescado al limÃ³n"
      ]
    };

    const tableBody = document.getElementById("menuTable");

    function createTable() {
      tableBody.innerHTML = "";
      meals.forEach(meal => {
        const row = document.createElement("tr");
        row.innerHTML = `<td class="bg-gray-100 font-semibold p-2">${meal}</td>`;
        days.forEach(() => {
          const cell = document.createElement("td");
          cell.contentEditable = true;
          cell.className = "p-2 border text-sm focus:outline-none";
          cell.addEventListener("input", updateShoppingList);
          row.appendChild(cell);
        });
        tableBody.appendChild(row);
      });
    }

    function randomItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function generateKetoMenu() {
      [...tableBody.rows].forEach(row => {
        const meal = row.cells[0].innerText;
        for (let i = 1; i < row.cells.length; i++) {
          row.cells[i].innerText = randomItem(ketoDishes[meal]);
        }
      });
      updateShoppingList();
    }

    function clearTable() {
      [...tableBody.querySelectorAll("td")].forEach((cell, index) => {
        if (index % 8 !== 0) cell.innerText = "";
      });
      document.getElementById("shoppingList").value = "";
    }

    function updateShoppingList() {
      const items = new Set();
      [...tableBody.querySelectorAll("td")].forEach((cell, index) => {
        if (index % 8 !== 0 && cell.innerText.trim()) {
          items.add("â€¢ " + cell.innerText);
        }
      });
      document.getElementById("shoppingList").value = [...items].join("\n");
    }

    createTable();
  </script>

</body>
</html>
